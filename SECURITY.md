# 🔒 راهنمای امنیت ربات تلگرام

## ✅ بهبودهای امنیتی اعمال شده

### 1. **اعتبارسنجی ورودی‌ها**
- تمام ورودی‌های کاربر اعتبارسنجی می‌شوند
- محدودیت طول برای تمام فیلدها
- فیلتر کردن کاراکترهای خطرناک

### 2. **محافظت از فایل‌های حساس**
- فایل `secure_config.php` از دسترسی وب محافظت می‌شود
- فایل‌های JSON و لاگ‌ها غیرقابل دسترسی هستند
- دایرکتوری `data` محافظت شده است

### 3. **بهبود سیستم پرداخت**
- اعتبارسنجی مبلغ‌های پرداخت
- محافظت از جلسات پرداخت
- لاگ کردن تراکنش‌ها

### 4. **هدرهای امنیتی**
- `X-Content-Type-Options: nosniff`
- `X-Frame-Options: DENY`
- `X-XSS-Protection: 1; mode=block`
- `Strict-Transport-Security`

### 5. **مدیریت خطا**
- لاگ کردن خطاها در فایل جداگانه
- نمایش ندادن اطلاعات حساس در خطاها
- صفحات خطای سفارشی

## 🛡️ نکات امنیتی مهم

### تنظیمات اولیه
1. فایل `secure_config.php` را ویرایش کنید
2. توکن ربات خود را وارد کنید
3. مریچنت زرین‌پال را تنظیم کنید
4. آیدی‌های ادمین را وارد کنید

### محافظت از سرور
1. فایل `.htaccess` را فعال کنید
2. SSL/HTTPS را فعال کنید
3. فایل‌های حساس را خارج از web root قرار دهید

### نگهداری
1. به‌روزرسانی منظم PHP
2. بررسی لاگ‌های خطا
3. پشتیبان‌گیری منظم

## ⚠️ هشدارهای امنیتی

### هرگز انجام ندهید:
- توکن ربات را در کد قرار ندهید
- فایل‌های حساس را در web root قرار ندهید
- از `eval()` یا `exec()` استفاده نکنید
- اطلاعات حساس را در لاگ‌ها ذخیره نکنید

### همیشه انجام دهید:
- ورودی‌ها را اعتبارسنجی کنید
- از HTTPS استفاده کنید
- فایل‌ها را به‌روزرسانی کنید
- لاگ‌ها را بررسی کنید

## 🔧 تنظیمات پیشرفته

### Rate Limiting
```php
// در secure_config.php
'RATE_LIMIT_PER_MINUTE' => 60,
'RATE_LIMIT_PER_HOUR' => 1000,
```

### Logging
```php
// در secure_config.php
'LOG_LEVEL' => 'ERROR',
'LOG_FILE' => 'logs/bot.log',
'ERROR_LOG_FILE' => 'logs/error.log',
```

### Cache
```php
// در secure_config.php
'CACHE_ENABLED' => true,
'CACHE_DURATION' => 300,
```

## 📞 پشتیبانی امنیتی

در صورت بروز مشکل امنیتی:
1. لاگ‌ها را بررسی کنید
2. فایل‌های مشکوک را حذف کنید
3. توکن ربات را تغییر دهید
4. با تیم پشتیبانی تماس بگیرید

---

**توجه**: این راهنما برای بهبود امنیت ربات طراحی شده است. لطفاً تمام نکات را رعایت کنید. 